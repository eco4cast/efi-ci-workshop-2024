<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.146">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Cameron Thompson">

<title>Cyberinfrastructure for Efficient Ecological Forecasting</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./images/EFI_Logo-1.jpg" rel="icon" type="image/jpeg">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Cyberinfrastructure for Efficient Ecological Forecasting</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-workshop-summary" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Workshop Summary</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-workshop-summary">    
        <li>
    <a class="dropdown-item" href="./workshopsummary/summary.html" rel="" target="">
 <span class="dropdown-text">EFI-CI Workshop Summary</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./workshopsummary/brief.html" rel="" target="">
 <span class="dropdown-text">EFI-CI Briefing Paper</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-reference" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Reference</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-reference">    
        <li>
    <a class="dropdown-item" href="./reference/EFI_CI_reference.html" rel="" target="">
 <span class="dropdown-text">Appendix: Acronyms, Terms, People, and References</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#efi-cyberinfrastructure-workshop-april-2024" id="toc-efi-cyberinfrastructure-workshop-april-2024" class="nav-link active" data-scroll-target="#efi-cyberinfrastructure-workshop-april-2024">EFI Cyberinfrastructure Workshop April 2024</a></li>
  <li><a href="#workshop-outcomes" id="toc-workshop-outcomes" class="nav-link" data-scroll-target="#workshop-outcomes">Workshop Outcomes</a>
  <ul class="collapse">
  <li><a href="#briefing-paper" id="toc-briefing-paper" class="nav-link" data-scroll-target="#briefing-paper">Briefing Paper <!-- Link to the briefing paper --></a></li>
  <li><a href="#step-by-step-summary-of-workshop" id="toc-step-by-step-summary-of-workshop" class="nav-link" data-scroll-target="#step-by-step-summary-of-workshop">Step by Step Summary of Workshop <!-- Link to the summary --></a></li>
  <li><a href="#appendix" id="toc-appendix" class="nav-link" data-scroll-target="#appendix">Appendix <!-- Link to the appendix --></a></li>
  </ul></li>
  <li><a href="#workshop-organization-agenda-and-participants" id="toc-workshop-organization-agenda-and-participants" class="nav-link" data-scroll-target="#workshop-organization-agenda-and-participants">Workshop Organization, Agenda, and Participants</a>
  <ul class="collapse">
  <li><a href="#participants-and-impressions" id="toc-participants-and-impressions" class="nav-link" data-scroll-target="#participants-and-impressions">Participants and Impressions</a></li>
  <li><a href="#organizers-and-funders" id="toc-organizers-and-funders" class="nav-link" data-scroll-target="#organizers-and-funders">Organizers and Funders</a></li>
  <li><a href="#agenda" id="toc-agenda" class="nav-link" data-scroll-target="#agenda">Agenda</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/eco4cast/efi-ci-workshop-2024/edit/main/index.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/eco4cast/efi-ci-workshop-2024/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Cyberinfrastructure for Efficient Ecological Forecasting</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Cameron Thompson </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="efi-cyberinfrastructure-workshop-april-2024" class="level1">
<h1>EFI Cyberinfrastructure Workshop April 2024</h1>
<p><img src="images/DSC_7900.JPG" class="img-fluid"></p>
<p>The lack of widely accepted cyberinfrastructure (CI) design principles poses a major obstacle for researchers and organizations seeking to engage in ecological forecasting. In an effort to address these obstacles, a workshop convened forecasting researchers and CI experts from government, academia, industry, and NGOs to: 1. Collate common CI practices currently used 2. Identify CI needs and gaps 3. Propose CI designs for various forecasting problems</p>
</section>
<section id="workshop-outcomes" class="level1">
<h1>Workshop Outcomes</h1>
<p>An objective of the workshop was to create an open-access version-controlled online document. This document was envisioned as a community-developed handbook of CI design principles and recommended practices accessible to the workshop participants and the broader EFI community. The living document was to function as a comprehensive CI guide for both novice and experienced forecasters aligned with community-developed forecasting standards <span class="citation" data-cites="dietze2023community">(<a href="#ref-dietze2023community" role="doc-biblioref">Dietze et al. 2023</a>)</span>.</p>
<section id="briefing-paper" class="level2">
<h2 class="anchored" data-anchor-id="briefing-paper"><a href="./workshopsummary/brief.html">Briefing Paper</a> <!-- Link to the briefing paper --></h2>
<p>A 1500-word briefing paper has been prepared in lieu of the initially planned community-developed handbook of CI design principles. After collating the workshop materials and reviewing the workshop exit survey, it was apparent that the workshop discussions were held at a higher level than necessary to achieve the initial goal. At this higher non-technical level of discussion, there were existing design principles that participants agreed with, but there are nonetheless obstacles to implementation.</p>
<p>The briefing paper outlines the necessity of cyberinfrastructure (CI) and highlights key thematic obstacles to implementation as identified in the workshop. Additionally, it includes recommendations derived from these themes. The target audience includes potential advocates in agencies, scientific societies, stakeholder groups, and boundary organizations who may not possess technical expertise but can recognize the need for CI. The broader EFI community and workshop participants are encouraged to comment on this briefing paper.</p>
</section>
<section id="step-by-step-summary-of-workshop" class="level2">
<h2 class="anchored" data-anchor-id="step-by-step-summary-of-workshop"><a href="./workshopsummary/summary.html">Step by Step Summary of Workshop</a> <!-- Link to the summary --></h2>
<p>The workshop’s agenda was crafted to cover essential CI design topics recommended by the organizing committee for inclusion in the handbook and to gather valuable input from attendees. Throughout the workshop, we documented the presentations, breakout sessions, and plenary discussions meticulously through detailed notes and audio recording transcripts. These materials were subsequently reviewed and refined to ensure clarity and accuracy in preparation for summarization.</p>
<p>Each workshop session was summarized with the assistance of a Large Language Model AI specifically Claude 3 Opus. We provided the AI with the workshop’s annotated agenda, transcripts of audio recordings, presentation slides, and notes along with specific instructions to generate detailed summaries. These instructions were iteratively fine-tuned to ensure the summaries met our standards. Finally, we carefully reviewed the summaries to ensure they accurately reflected the workshop’s discussions. Special attention was given to common themes emerging from the breakout sessions which required deeper interpretation and analysis. The collation of those notes can be found in the following document which the community and workshop participants are encouraged to comment on.</p>
</section>
<section id="appendix" class="level2">
<h2 class="anchored" data-anchor-id="appendix"><a href="./reference/EFI_CI_reference.html">Appendix</a> <!-- Link to the appendix --></h2>
<p>The appendix includes acronyms, a glossary of terms, references, and a list of named participants and their affiliations.</p>
</section>
</section>
<section id="workshop-organization-agenda-and-participants" class="level1">
<h1>Workshop Organization, Agenda, and Participants</h1>
<section id="participants-and-impressions" class="level2">
<h2 class="anchored" data-anchor-id="participants-and-impressions">Participants and Impressions</h2>
<p>The workshop participants included a diverse mix of 41 participants from various sectors. Federal agencies were well-represented with 19 participants from 6 different agencies including USGS, NOAA, and NASA. Academia contributed 12 participants from 11 different institutions with international representation from the Finnish Meteorological Institute. The private sector added 5 participants, while NGOs including IOOS regional associations represented the remainder.</p>
<p>According to an exit survey of 28 participants prior to the workshop, the majority of attendees were slightly or moderately knowledgeable of ecological forecasting CI. Around 20% were very knowledgeable, and 7% were not at all knowledgeable. This makeup of participants influenced the scope of the topics covered, focusing more on higher level concepts and general design rather than the technical aspects of cyber infrastructure. Overall, the workshop was well received. It met participants’ expectations, with the majority being ‘extremely satisfied’, although the lack of technical content was noted by several survey respondents.</p>
<p>Reported knowledge gains from the workshop were significant. Participants increased their familiarity with the EFI initiative, NERACOOS, and ecological forecasting cyberinfrastructure in general. There was a strong gain in knowledge about the forecasting cyberinfrastructure of other organizations, increasing from 0% and 11% to 14% and 71% (very knowledgeable and moderately knowledgeable respectively). The strong satisfaction of participants with the workshop was underscored by strong agreement that the workshop facilitated effective collaboration, increased community engagement, and was considered a valuable use of time aligning well with personal goals. Moreover, interactions with workshop organizers and the efficacy of communications were particularly praised. Participants valued the chance to meet peers, learn from diverse CI use cases, and engage in discussions that spanned across multiple perspectives including those focusing on design justice principles. Recommendations for future workshops emphasized a desire for more hands-on experiences with cyberinfrastructure tools, deeper technical discussions, and enhanced skill-building sessions.</p>
</section>
<section id="organizers-and-funders" class="level2">
<h2 class="anchored" data-anchor-id="organizers-and-funders">Organizers and Funders</h2>
<p>The workshop was co-hosted by EFI and the Northeastern Regional Association for Coastal Ocean Observing Systems (NERACOOS) in Portsmouth, New Hampshire. It was made possible through support from the National Oceanic and Atmospheric Administration/US IOOS, the National Aeronautics and Space Administration, the Northeastern Regional Association of Coastal Ocean Observing Systems, the Ecological Forecasting Initiative, and the U.S. Geological Survey.</p>
<p><strong>Organizing Committee</strong>: Jake Zwart (USGS), Hassan Moustahfid (NOAA), Chris Brown (University of Maryland), Jessica Burnett (NASA), Jake Kritzer (NERACOOS), Rob Cardeiro (NERACOOS), Cameron Thompson (NERACOOS), Emily Silva (NERACOOS), Caitlin Shanahan (NERACOOS), Jody Peters (University of Notre Dame), Mike Dietze (Boston University)</p>
</section>
<section id="agenda" class="level2">
<h2 class="anchored" data-anchor-id="agenda">Agenda</h2>
<table class="table">
<colgroup>
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 66%">
</colgroup>
<thead>
<tr class="header">
<th>Date</th>
<th>Time</th>
<th>Activity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>April 10</td>
<td>8:30 - 9:00 am</td>
<td>Welcome Coffee &amp; Tea</td>
</tr>
<tr class="even">
<td></td>
<td>9:00 - 10:00 am</td>
<td>Overview of Workshop Goals and Why We Are Here <br> Leads: Workshop Organizing Committee</td>
</tr>
<tr class="odd">
<td></td>
<td>10:00 - 11:00 am</td>
<td>Design Justice Principles Primer <br> Lead: Sean Dorr, University of Minnesota</td>
</tr>
<tr class="even">
<td></td>
<td>11:00 - 11:15 am</td>
<td>Coffee and Tea Break</td>
</tr>
<tr class="odd">
<td></td>
<td>11:15 - 12:00 pm</td>
<td>Design Justice Principles Activity <br> Lead: Sean Dorr, University of Minnesota</td>
</tr>
<tr class="even">
<td></td>
<td>12:00 - 12:10 pm</td>
<td>Group Photo</td>
</tr>
<tr class="odd">
<td></td>
<td>12:10 - 1:30 pm</td>
<td>Lunch</td>
</tr>
<tr class="even">
<td></td>
<td>1:30 - 3:30 pm</td>
<td>State-of-the-art Forecasting Workflows and Best Practices Presentations</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td>- Istem Fer, Finnish Meteorological Institute: What could an operational agricultural forecasting CI look like? Field Observatory Network (FiON) model-data workflows and services</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td>- David Watkins, U.S. Geological Survey: Forecasting infrastructure in context: lessons learned from greenfield forecasting projects</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td>- Clarissa Anderson, University of California San Diego and Southern California Coastal Ocean Observing System: Development of a Harmful Algal Bloom (HAB) Data Assembly Center in support of a National HAB Observing Network</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td>- Quinn Thomas, Virginia Tech, and Carl Boettiger, University of California Berkeley: Adventures from a million forecast march: community driven-CI for ecological forecasting</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td>- Alexandra Kirk (virtual), National Aeronautics and Space Administration IMPACT: VEDA, an open-source open-science platform for Earth Observation data</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td>- Renato Figueiredo, University of Florida: From FLARE to FaaSr: Towards Reusable Scalable Cross-Platform Cloud Native Workflows</td>
</tr>
<tr class="odd">
<td></td>
<td>3:30 - 3:45 pm</td>
<td>Coffee and Tea Break</td>
</tr>
<tr class="even">
<td></td>
<td>3:45 - 5:00 pm</td>
<td>Breakout Group Discussions: What are common best practices and current technical gaps?</td>
</tr>
<tr class="odd">
<td></td>
<td>5:00 pm</td>
<td>End of Day 1</td>
</tr>
<tr class="even">
<td>April 11</td>
<td>8:30 - 9:00 am</td>
<td>Welcome Coffee &amp; Tea</td>
</tr>
<tr class="odd">
<td></td>
<td>9:00 - 9:10 am</td>
<td>Recap of Day 1 and Overview of Day 2 <br> Lead: Jake Zwart</td>
</tr>
<tr class="even">
<td></td>
<td>9:10 - 10:15 am</td>
<td>Gaps, Barriers, and Other Challenges Presentations</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td>- Mike Dietze, Boston University</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td>- Marie Colton, Hydros LLC</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td>- David Scheurer, NOAA Ocean Service</td>
</tr>
<tr class="even">
<td></td>
<td>10:15 - 10:30 am</td>
<td>Coffee &amp; Tea Break</td>
</tr>
<tr class="odd">
<td></td>
<td>10:30 - 12:00 pm</td>
<td>Breakout Group Discussions: Synthesize common gaps, barriers, and challenges</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td>Recommendations for overcoming common gaps and barriers</td>
</tr>
<tr class="odd">
<td></td>
<td>12:00 - 1:30 pm</td>
<td>Lunch</td>
</tr>
<tr class="even">
<td></td>
<td>1:30 - 3:00 pm</td>
<td>Breakout Group Discussions: Propose generalized cyberinfrastructure design for ecological forecasting</td>
</tr>
<tr class="odd">
<td></td>
<td>3:00 - 3:15 pm</td>
<td>Coffee &amp; Tea Break</td>
</tr>
<tr class="even">
<td></td>
<td>3:15 - 3:45 pm</td>
<td>Report out on Proposed Generalized Cyberinfrastructure Design <br> Lead: Jake Zwart</td>
</tr>
<tr class="odd">
<td></td>
<td>3:45 - 4:00 pm</td>
<td>Bio Break</td>
</tr>
<tr class="even">
<td></td>
<td>4:00 - 5:00 pm</td>
<td>Implementation and Coordination by Organizations and Agencies <br> Leads: Jessica Burnett and Christopher Brown <br> Panel discussion:</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td>- Clarissa Anderson, UCSD &amp; SCCOOS</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td>- Stinger Guala, NASA Earth Science Data Systems</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td>- Marie Colton, Hydros LLC</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td>- David Scheurer, NOAA Ocean Service</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td>- Steve Marley, NOAA Satellite &amp; Information Service</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td>- Bruce Wilson, ORNL Distributed Active Archive Center</td>
</tr>
<tr class="odd">
<td></td>
<td>5:00 pm</td>
<td>End of Day 2</td>
</tr>
<tr class="even">
<td>April 12</td>
<td>8:30 - 9:00 am</td>
<td>Welcome Coffee &amp; Tea</td>
</tr>
<tr class="odd">
<td></td>
<td>9:00 - 9:10 am</td>
<td>Recap of Day 2 and Overview of Day 3 <br> Lead: Jake Zwart</td>
</tr>
<tr class="even">
<td></td>
<td>9:10 - 10:45 am</td>
<td>Implementation and Coordination by Organizations and Agencies <br> Leads: Jessica Burnett and Christopher Brown <br> Breakout group discussions</td>
</tr>
<tr class="odd">
<td></td>
<td>10:45 - 11:00 am</td>
<td>Coffee &amp; Tea Break</td>
</tr>
<tr class="even">
<td></td>
<td>11:00 - 11:45 am</td>
<td>Report out on Implementation and Coordination <br> Leads: Jessica Burnett and Christopher Brown</td>
</tr>
<tr class="odd">
<td></td>
<td>11:45 - 12:00 pm</td>
<td>Closing Remarks and End of Workshop <br> Lead: Workshop organizing committee</td>
</tr>
</tbody>
</table>



</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-dietze2023community" class="csl-entry" role="listitem">
Dietze, Michael C, R Quinn Thomas, Jody Peters, Carl Boettiger, Gerbrand Koren, Alexey N Shiklomanov, and Jaime Ashander. 2023. <span>“A Community Convention for Ecological Forecasting: Output Files and Metadata Version 1.0.”</span> <em>Ecosphere</em> 14 (11): e4686.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    if (id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        for (let i = 0; i < 2; i++) {
          container.appendChild(note.children[i].cloneNode(true));
        }
        return container.innerHTML
      } else {
        return note.innerHTML;
      }
    } else {
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      try { hash = new URL(url).hash; } catch {}
      const id = hash.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note !== null) {
        try {
          const html = processXRef(id, note);
          instance.setContent(html);
        } finally {
          instance.enable();
          instance.show();
        }
      } else {
        // See if we can fetch this
        fetch(url.split('#')[0])
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.getElementById(id);
          console.log(htmlDoc.body.innerHTML);
          if (note !== null) {
            const html = processXRef(id, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>